class Role<T> {
  T t;
  int i;

  T fromInt(int i);
  int toInt(T t);
}

class A { }

class B { }

seq_program genericTest() {
  endpoint a = Role<A>();
  endpoint b = Role<B>();

  requires a != b;
  seq_run {
    a.i := a.toInt(a.t);
    communicate a.i -> b.i;
    b.t := b.fromInt(b.i);
  }
}