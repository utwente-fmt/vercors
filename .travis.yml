os: osx
osx_image: xcode9.3

language: scala
scala:
- 2.11.7

jdk:
- oraclejdk8

env:
  - PATH=$TRAVIS_BUILD_DIR/unix/bin:$PATH

addons:
  apt:
    packages:
      - tcl
      - texlive
      - texlive-latex-recommended
      - texlive-latex-extra
  sonarcloud:
    organization: utwente-fmt
    token:
      secure: "X8MuVJAOi30ko+KoRnKg6mhBpembu1Dj9KQ4qfUR4TRFcNElONJnKZQHNfY60m+LdBh49iTwCbwm5Z+w8794xYu8HWotMF0Q5T9H4lPRxnvK/klja/1zFFqn7Rv9r+/OmmnD6MIRsMBfmIzHowSz1OJxNg7zCG9bef5izN8oep0r6JROeaP9ewIJUmc9gPG2APBP8TLxpXusDOMY7bjyaxrZZgxQVYv+ncWqFIFg1lPrCxkpISYHXbtqe2oCb9bT5/oBOPTf2sdqSCTI7dpWXr2Dw7s1SqnldhIfM28yl2/yWz5S+y332X7vrma27shwFY61AXencHYb14SJc1x7Oh/tlY8uaOzzZsaJARNaLwlY1jfv08A/gj3buozEFrB7VOOSMnx0Hi/BUolqxmslj9llvVZ19ET/4iK4Yi7zZw1qW1WqYgNHspy73UdqqJ09S2aYoMUP9OV0WEZflZV63efxMQ/ZIEimMvIZERaoZdQqUUhlxTYOly2xPWUX4LJhEwwFc8M4/O7H3SaSIZ0gFzJJJWtY+EONeE19BLqwGUMYL2IZNeB0YyAL83BPF4HhsucLZqbbPq1HASbDYtdQlCHrKwgtPs4/cv8gFwwt9ZgKXDYVgNVbBC1HAa+Gf2RwpAPjeo9g5opMJPhuqtAUPi217Pi5rPgqBITWZ5UWtjI="
cache:
  directories:
   - $HOME/.ivy2
   - $HOME/Library/Caches/Homebrew
   - /usr/local/Homebrew

script:
# Install ant
- brew install ant
# Compile the tool
- sh travis_build.sh
# Test one example that shows all error messages
#- vct --silicon $TRAVIS_BUILD_DIR/examples/manual/fibonacci.pvl
# Test the remaining examples while hiding messages
#- vct --tool=silicon --lang=java,pvl --exclude-suite=slow,medium,problem-fail,skip-travis --test=$TRAVIS_BUILD_DIR/examples
# Run the Sonar scanner
- sonar-scanner -X

#deploy:
#  provider: releases
#  api_key:
#    secure: MFGqeFi8E9eLtcy+5wQ/+xgSKyg3QY2Jm0wRBk6GWyIh3WUdjhI0Fqe3rII/r+AyB2tC3tA8zNzNRar1wOYgVr8zLQwwsfq+K/PfeOPitkKiPmUICeZXEXpTgOhkg53vynN+ZXwV4UcEKR64Z7LMK0mWqpCf3jzv8S9fu0/zV/cwo86LNbHPTRJtVxst25YUVL9X9U3lV7Q+KvRgephjuIG2gz/Ce63uVxVGiTMFETzeL0FM8hdSQUCcRKIFysDxhOh+oofPLkGQOQsET4atNYsqmEXOMnZjU07muqXTrsybz/PhTW2Ioi3AdCR/tfNnoOhBiON6hWyR66db8DKNfiyLmFvyEFsOLm5nNhucU4wvRslRyMfayn+D4nRc/I0I4ozifl0WXfqBbtAqFtUUV1cuWZfIDH9OJF5YfB2mbUs9FYo5CpopjNnGV8rlkzzGm15EWQhMTeq1qpxl+E2NsY0UZ3DoxLRzLEvoykpN9VatiYkrpX6jG9g2u1GZ6E/fDw5NwouUI/tLeaFhvHydMx7GVewKRNWuLC0hct92tKWtjV9tLCVzOoHGuDmWZVRLH6Zn5XJvCfhBZvu7RcM9S5UdJbdW5PYf8qYgTqteIoXYKQUofOGUCsbsBncLuiRT9I1pXMYolAcd06KfTdmhk6QHYCAN1JP6Rgz//r3osSc=
#  file: 'dist/vercors-$TRAVIS_TAG.zip'
#  on:
#    repo: utwente-fmt/vercors
#    tags: true

deploy:
  provider: releases
  api_key:
    secure: MFGqeFi8E9eLtcy+5wQ/+xgSKyg3QY2Jm0wRBk6GWyIh3WUdjhI0Fqe3rII/r+AyB2tC3tA8zNzNRar1wOYgVr8zLQwwsfq+K/PfeOPitkKiPmUICeZXEXpTgOhkg53vynN+ZXwV4UcEKR64Z7LMK0mWqpCf3jzv8S9fu0/zV/cwo86LNbHPTRJtVxst25YUVL9X9U3lV7Q+KvRgephjuIG2gz/Ce63uVxVGiTMFETzeL0FM8hdSQUCcRKIFysDxhOh+oofPLkGQOQsET4atNYsqmEXOMnZjU07muqXTrsybz/PhTW2Ioi3AdCR/tfNnoOhBiON6hWyR66db8DKNfiyLmFvyEFsOLm5nNhucU4wvRslRyMfayn+D4nRc/I0I4ozifl0WXfqBbtAqFtUUV1cuWZfIDH9OJF5YfB2mbUs9FYo5CpopjNnGV8rlkzzGm15EWQhMTeq1qpxl+E2NsY0UZ3DoxLRzLEvoykpN9VatiYkrpX6jG9g2u1GZ6E/fDw5NwouUI/tLeaFhvHydMx7GVewKRNWuLC0hct92tKWtjV9tLCVzOoHGuDmWZVRLH6Zn5XJvCfhBZvu7RcM9S5UdJbdW5PYf8qYgTqteIoXYKQUofOGUCsbsBncLuiRT9I1pXMYolAcd06KfTdmhk6QHYCAN1JP6Rgz//r3osSc=
  file: 'src/tex/manual.pdf'
  on:
    repo: utwente-fmt/vercors
    tags: true
